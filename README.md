# Castle of Ghosts

Браузерная игра, в жанре рогалик. Вам необходимо найти ключ и сбежать из замка
Графика игры рисуется в Canvas. Интерфейс работает на React

## Демо
> https://castleofghosts.herokuapp.com/

<br/>

---

## Установка и запуск
1. Клонировать репозиторий
2. Выполнить команду `yarn` (`npm install`)
3. Запустить игру командой `yarn start` (`npm run start`)
4. Играть

## API
В качестве сервера используется
[__API Yandex Praktikum__](https://ya-praktikum.tech/api/v2/swagger/)
(`https://ya-praktikum.tech/api/v2/`)

## Работа с кодом

### Основные параметры:
-   Для базовых настроек IDE используется конфиг файл `.editorconfig`
-   Отступы `4` кроме `json` файлов, в которых `2` отступа
-   Ширина рабочей области `120` символов
-   В конце каждого файла кроме `md` обязательно пустая строка
-   Окончание строк обозначается через `lf`

### Форматирование кода:
-   Используется __*Prettier*__ с конфигом в `.prettierrc.json`

### Валидатор кода(линтер):
-   Используется __*ESLint*__ с конфигами в файле `.eslintrc.json` и файлом с исключениями в `eslintignore`
-   За основу взят базовая конфигурация __*AirBnB*__ с добавлением настроек для *typescript*.
-   Ошибки форматирования *Prettier* выводятся как `warning`
-   Выполняется валидация всех файлов `js, ts, jsx, tsx` в проекте
-   Комманды:
    ```bash
    # Вместо 'yarn' может быть использовано 'npm run'

    # Запук валидации
    yarn lint:verify

    # Запук валидации с исправления рутинных ошибок
    yarn lint:fix
    ```
### Валидатор стилей(линтер):
-   Используется __*Stylelint*__ с конфигом в `.stylelintrc.json`
-   Выполняется валидация всех файлов `scss` в каталоге `app/src`
-   Комманды:
    ```bash
    # Вместо 'yarn' может быть использовано 'npm run'

    # Запук валидации
    yarn slint:verify

    # Запук валидации с исправления рутинных ошибок
    yarn slint:fix
    ```

### Верификация перед коммитом:
-   `pre-commit` При любом уведомлении коммит запрещается.

    На данный момент выполняются:
    1. __ESLint__
    Для исправления части проблем выполнить `yarn lint:fix`
    2. __Stylelint__
    Для исправления части проблем выполнить `yarn slint:fix`
    3. __yarn check__
    Для исправления выполнить `yarn yarn:fix`


## Локальный сервер
Для запуска приложения локально используется __*ExpressJS*__

Порт по умолчанию: `3000`.
Так же можно передать параметром, либо через переменную окружения `PORT`

Комманды:
```bash
# Вместо 'yarn' может быть использовано 'npm run'

# Сборка сервера
yarn server:build

# Сборка с отслеживанием изменений кода (для разработки)
yarn server:serve

# Запуск сервера
yarn server:run

# Удаление старой сборки из каталога
yarn server:clear

# Транспиляция TS (руками запускать не нужно)
yarn server:ts:compile

# Транспиляция TS с отслеживанием (руками запускать не нужно)
yarn server:ts:watch

# Запуск сервера с отслеживанием изменений js файла (руками запускать не нужно)
yarn server:nodemon
```

## Дополнительные команды в `package.json`
```bash
# Вместо 'yarn' может быть использовано 'npm run'

# Анализ webpack сборки с выводом графика в браузер
yarn app:analyze
```

### Docker
```bash
# Вместо 'yarn' может быть использовано 'npm run'

# Сборка образа
yarn docker:build

# Запуск контейнера
yarn docker:run

# Загрузка образа на Heroku через CLI (необходима локальная копия)
yarn docker:heroku
```

### Heroku
`yarn start` - Для запуска сервиса

